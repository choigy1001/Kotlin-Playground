# 코틀린 인 액션
# 1장 코틀린이란 무엇이고 왜 필요한가?

## 1.1 코틀린 맛보기
```kotlin
data class Person(val name: String, val age: Int? = null)

fun main(args: Array<String>) {
    val persons = listOf(Person("영희"), Person("철수", age = 29))
    val oldest = persons.maxByOrNull { it.age ?: 0 }
    println("나이가 가장 많은 사람: $oldest")
}
```

해당 코드를 보면 자바와 다른 점을 발견할 수 있다.  
위 코드에서 차례대로 차이점에 대해 알아보면 다음과 같다.
1. 데이터 클래스의 등장 및 중괄호의 부재
2. 널이 될 수 있는 타입(Int?)와 파라미터 디폴트 값(null)
3. new Person -> Person
4. age = 29 와 같이 이름 붙인 파라미터
5. 람다의 it, 엘비스 연산자 ?:
6. 문자열 탬플릿($oldest)  

이와 같이 새로운 것들을 참고해서 코틀린을 적극 사용해보자.

## 1.2 코틀린의 주요 특성
1. 자바가 실행되는 곳이라면 어디든 사용 가능
2. 정적 타입 지정 언어
3. 함수형 프로그래밍, 객체지향 프로그래밍
4. 무료 오픈 소스


# 2장 코틀린 기초

## 2.1 기본 요소: 함수와 변수

### 2.1.1 Hello, World!
```kotlin
fun main(args: Array<String>) {
    println("Hello, world!")
}
```
 위 코드를 토대로 우리는 코트린의 특성과 문법을 몇가지 파악할 수 있다.

- 함수 선언시에는 fun 키워드를 사용
- 파라미터 이름 뒤에 그 파라미터의 타입을 사용
- 함수를 최상위 수준에 정의할 수 있다. 꼭 클래스 안에 함수를 넣을 필요가 없음.
- 배열은 일반적인 클래스와 같다.
- 코틀린 표준 라이브러리는 자바 표준 라이브러리 함수를 간결하게 사용하도록 래퍼를 제공한다.  
  println도 그 중 하나이다.
- 세미콜론 생략 가능

### 2.1.2 함수
```kotlin
fun max(a: Int, b: Int): Int {
    return if (a > b) a else b
}
```
반환 타입을 설정하고 싶다면 매개변수 목록 뒤에 콜론과 함께 반환 타입을 명시하면 된다.  
if는 문이 아닌 식이다. 값을 만들어낸다면 식, 아니면 문이라고 할 수 있다.   

추가로 대입문은 식에서 문으로 바뀌었다. 그래서 아래와 같은 코드는 컴파일 오류가 발생한다.
```kotlin
fun test() {
    val a = 5
    println(a = 7) //컴파일 오류
}
```
<b>식이 본문인 함수 </b>
```kotlin
fun max(a: Int, b: Int): Int = if (a > b) a else b
```
if 식하나로 함수 본문이 이루어져 있다면 중괄호와 return을 생략할 수 있다.

함수가 중괄호로 둘러싸이면 블록이 본문인 함수, 등호와 식으로 이루어지면 식이 본문인 함수라 한다.  
식이 본문인 함수는 컴파일러가 타입 추론을 할 수 있기에 반환타입을 생략할 수 있다.

### 2.1.3 변수
```kotlin
val question = "이게 뭘까요?"
val answer = 42
```
코틀린은 위처럼 타입을 생략하여 선언할 수 있다.  
물론 원한다면 타입 명시가 가능하다.

하지만 위처럼 초기화식을 사용하지 않고 변수를 선언하면 컴파일 에러가 발생하니 그럴땐 타입을 선언하자. 

<b>변경 가능한 변수와 변경 불가능한 변수</b>  
변수 선언 시 사용되는 키워드는 2가지이다.
- val : 변경 불가능한 참조를 저장하는 변수이다. 초기화하고 나면 재대입이 불가능하다.  
final 변수와 유사함.
- var : 변경 가능한 참조다. 자바로 따지면 일반 변수에 해당한다.

코틀린은 val 방식으로 변수를 선언하도록 권장하고 있다.

```kotlin
var answer = 42
answer = "no answer"
```
- 위 코드처럼 var이 가변이라고 하여 다른 타입으로 변경한다면 컴파일 오류가 발생하니 주의해서 사용하자.
- 다른 타입으로 변경하고 싶다면 강제 형변환을 사용해야 한다.

### 2.1.4 더 쉽게 문자열 형식 지정: 문자열 템플릿
```kotlin
fun main(args: Array<String>) {
    val name = "홍길동"
    println("Hello, $name")
    println("Hello, ${args[0]}")
}
```
- 문자열 템플릿을 이용하여 위 코드와 같이 변수를 문자열 안에 사용할 수 있다.
- 변수 이외의 식 또한 중괄호로 둘러싸 템플릿 안에 넣을 수 있다.
- 변수명만 사용하는 것도 좋지만 중괄호를 사용하는 것이 더 식별하기 쉽기에 중괄호 사용을 습관화하자.


